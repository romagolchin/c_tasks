#include <math.h>
#include "format.h"


int main() {
	try {
		freopen("test", "w", stdout);
		int arr[3] = {23, 42, 239};
		cout << format("array: %@", arr) << endl;
		int x, y;
		int *ptr = &x;
		int *ptr1 = &y;
		double d = sqrt(2.);
		cout << format("%.10le%n\n", d, ptr);
		cout << x << endl;
		cout << format("%@", d) << endl;
		cout << format("%@\n", "string");
		const char* s = "string";
		cout << format("my%%%@\n", s);
		int* ptrs[2][2] = {{ptr, ptr1}, {ptr1, ptr}};
		cout << format("%@\n", ptrs);
		void* vd;
		cout << format("%@\n", vd);

		int **pp = &ptr;
		cout << format("%@\n", pp);
		string f = "aba%%caba%%%%%n%100dxyz%n";
		string res = format(f, ptr1, 42, ptr);
		cout << res << endl;
		cout << y << ' ' << x << endl;
		// cout << format("Characters: %c %c \n", 'a', 65);
		// cout << format("Decimals: %d %ld\n", 1977, 650000L);
		// cout << format("Preceding with blanks: %10d \n", 1977);
		// cout << format("Preceding with blanks: %010d \n", 1977);
		// cout << format("Some different radices: %d %x %o %#o %#x \n", 100, 100, 100, 100, 100);
		// cout << format("floats: %4.2f %+.100e %E \n", 3.1416, 3.1416, 3.1416);
		// cout << format("Width trick: %*d %d\n", -5, 10, 11);
		cout << format("%s \n", string("A string"));
		// cout << format(string("a%+0%100d "), 123);
		// char* str = 0;
		// cout << format("%s\n", str);
		// int a = 1;
		// int* p = &a;
		// // cout << format("%*p\n", 1, 42);
		// cout << format("%.1d\n", 1024);
		// cout << format("*\n");
		// double sq2 = sqrt(2.0);
		// cout << format("%.100f\n", sq2);
		// double small = 1e-290;
		// cout << format("%.300f\n", small);
		// cout << format("%.4s\n", "hello");
		// double large = 1e200;
		// cout << format("%lf\n", large);
		// cout << format("%d\n", small);
		// printf("ORIG: hello");
		// printf("\nTEST: %s\n", format("hello").c_str());
		// printf("ORIG: %%");
		// printf("\nTEST: %s\n", format("%%").c_str());
		// printf("ORIG: hello%%world");
		// printf("\nTEST: %s\n", format("hello%%world").c_str());
		// printf("ORIG: %d", 1234567);
		// printf("\nTEST: %s\n", format("%d", 1234567).c_str());
		// printf("ORIG: %+d", 1234567);
		// printf("\nTEST: %s\n", format("%+d", 1234567).c_str());
		// printf("ORIG: %-5d", 1234567);
		// printf("\nTEST: %s\n", format("%-5d", 1234567).c_str());
		// printf("ORIG: % 5d", 1234567);
		// printf("\nTEST: %s\n", format("% 5d", 1234567).c_str());
		// printf("ORIG: %05d", 1234567);
		// printf("\nTEST: %s\n", format("%05d", 1234567).c_str());
		// printf("ORIG: %.5d", 1234567);
		// printf("\nTEST: %s\n", format("%.5d", 1234567).c_str());
		// printf("ORIG: %7.5d", 1234567);
		// printf("\nTEST: %s\n", format("%7.5d", 1234567).c_str());
		// printf("ORIG: %i", 1234567);
		// printf("\nTEST: %s\n", format("%i", 1234567).c_str());
		// printf("ORIG: %+i", 1234567);
		// printf("\nTEST: %s\n", format("%+i", 1234567).c_str());
		// printf("ORIG: %-5i", 1234567);
		// printf("\nTEST: %s\n", format("%-5i", 1234567).c_str());
		// printf("ORIG: % 5i", 1234567);
		// printf("\nTEST: %s\n", format("% 5i", 1234567).c_str());
		// printf("ORIG: %05i", 1234567);
		// printf("\nTEST: %s\n", format("%05i", 1234567).c_str());
		// printf("ORIG: %.5i", 1234567);
		// printf("\nTEST: %s\n", format("%.5i", 1234567).c_str());
		// printf("ORIG: %7.5i", 1234567);
		// printf("\nTEST: %s\n", format("%7.5i", 1234567).c_str());
		// printf("ORIG: %u", 1234567);
		// printf("\nTEST: %s\n", format("%u", 1234567).c_str());
		// printf("ORIG: %+u", 1234567);
		// printf("\nTEST: %s\n", format("%+u", 1234567).c_str());
		// printf("ORIG: %-5u", 1234567);
		// printf("\nTEST: %s\n", format("%-5u", 1234567).c_str());
		// printf("ORIG: % 5u", 1234567);
		// printf("\nTEST: %s\n", format("% 5u", 1234567).c_str());
		// printf("ORIG: %05u", 1234567);
		// printf("\nTEST: %s\n", format("%05u", 1234567).c_str());
		// printf("ORIG: %.5u", 1234567);
		// printf("\nTEST: %s\n", format("%.5u", 1234567).c_str());
		// printf("ORIG: %7.5u", 1234567);
		// printf("\nTEST: %s\n", format("%7.5u", 1234567).c_str());
		// printf("ORIG: %o", 1234567);
		// printf("\nTEST: %s\n", format("%o", 1234567).c_str());
		// printf("ORIG: %+o", 1234567);
		// printf("\nTEST: %s\n", format("%+o", 1234567).c_str());
		// printf("ORIG: %-5o", 1234567);
		// printf("\nTEST: %s\n", format("%-5o", 1234567).c_str());
		// printf("ORIG: % 5o", 1234567);
		// printf("\nTEST: %s\n", format("% 5o", 1234567).c_str());
		// printf("ORIG: %05o", 1234567);
		// printf("\nTEST: %s\n", format("%05o", 1234567).c_str());
		// printf("ORIG: %.5o", 1234567);
		// printf("\nTEST: %s\n", format("%.5o", 1234567).c_str());
		// printf("ORIG: %7.5o", 1234567);
		// printf("\nTEST: %s\n", format("%7.5o", 1234567).c_str());
		// printf("ORIG: %#o", 1234567);
		// printf("\nTEST: %s\n", format("%#o", 1234567).c_str());
		// printf("ORIG: %x", 1234567);
		// printf("\nTEST: %s\n", format("%x", 1234567).c_str());
		// printf("ORIG: %+x", 1234567);
		// printf("\nTEST: %s\n", format("%+x", 1234567).c_str());
		// printf("ORIG: %-5x", 1234567);
		// printf("\nTEST: %s\n", format("%-5x", 1234567).c_str());
		// printf("ORIG: % 5x", 1234567);
		// printf("\nTEST: %s\n", format("% 5x", 1234567).c_str());
		// printf("ORIG: %05x", 1234567);
		// printf("\nTEST: %s\n", format("%05x", 1234567).c_str());
		// printf("ORIG: %.5x", 1234567);
		// printf("\nTEST: %s\n", format("%.5x", 1234567).c_str());
		// printf("ORIG: %7.5x", 1234567);
		// printf("\nTEST: %s\n", format("%7.5x", 1234567).c_str());
		// printf("ORIG: %X", 1234567);
		// printf("\nTEST: %s\n", format("%X", 1234567).c_str());
		// printf("ORIG: %+X", 1234567);
		// printf("\nTEST: %s\n", format("%+X", 1234567).c_str());
		// printf("ORIG: %-5X", 1234567);
		// printf("\nTEST: %s\n", format("%-5X", 1234567).c_str());
		// printf("ORIG: % 5X", 1234567);
		// printf("\nTEST: %s\n", format("% 5X", 1234567).c_str());
		// printf("ORIG: %05X", 1234567);
		// printf("\nTEST: %s\n", format("%05X", 1234567).c_str());
		// printf("ORIG: %.5X", 1234567);
		// printf("\nTEST: %s\n", format("%.5X", 1234567).c_str());
		// printf("ORIG: %7.5X", 1234567);
		// printf("\nTEST: %s\n", format("%7.5X", 1234567).c_str());
		// printf("ORIG: %#4x", 1234567);
		// printf("\nTEST: %s\n", format("%#4x", 1234567).c_str());
		// printf("ORIG: %#X", 1234567);
		// printf("\nTEST: %s\n", format("%#X", 1234567).c_str());
		// printf("ORIG: %f", 1234567.0);
		// printf("\nTEST: %s\n", format("%f", 1234567.0).c_str());
		// printf("ORIG: %+f", 1234567.0);
		// printf("\nTEST: %s\n", format("%+f", 1234567.0).c_str());
		// printf("ORIG: %-5f", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5f", 1234567.0).c_str());
		// printf("ORIG: % 5f", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5f", 1234567.0).c_str());
		// printf("ORIG: %05f", 1234567.0);
		// printf("\nTEST: %s\n", format("%05f", 1234567.0).c_str());
		// printf("ORIG: %.5f", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5f", 1234567.0).c_str());
		// printf("ORIG: %7.5f", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5f", 1234567.0).c_str());
		// printf("ORIG: %F", 1234567.0);
		// printf("\nTEST: %s\n", format("%F", 1234567.0).c_str());
		// printf("ORIG: %+F", 1234567.0);
		// printf("\nTEST: %s\n", format("%+F", 1234567.0).c_str());
		// printf("ORIG: %-5F", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5F", 1234567.0).c_str());
		// printf("ORIG: % 5F", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5F", 1234567.0).c_str());
		// printf("ORIG: %05F", 1234567.0);
		// printf("\nTEST: %s\n", format("%05F", 1234567.0).c_str());
		// printf("ORIG: %.5F %n", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5F %n", 1234567.0).c_str());
		// printf("ORIG: %7.5F", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5F", 1234567.0).c_str());
		// printf("ORIG: %e", 1234567.0);
		// printf("\nTEST: %s\n", format("%e", 1234567.0).c_str());
		// printf("ORIG: %+e", 1234567.0);
		// printf("\nTEST: %s\n", format("%+e", 1234567.0).c_str());
		// printf("ORIG: %-5e", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5e", 1234567.0).c_str());
		// printf("ORIG: % 5e", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5e", 1234567.0).c_str());
		// printf("ORIG: %05e", 1234567.0);
		// printf("\nTEST: %s\n", format("%05e", 1234567.0).c_str());
		// printf("ORIG: %.5e", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5e", 1234567.0).c_str());
		// printf("ORIG: %7.5e", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5e", 1234567.0).c_str());
		// printf("ORIG: %E", 1234567.0);
		// printf("\nTEST: %s\n", format("%E", 1234567.0).c_str());
		// printf("ORIG: %+E", 1234567.0);
		// printf("\nTEST: %s\n", format("%+E", 1234567.0).c_str());
		// printf("ORIG: %-5E", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5E", 1234567.0).c_str());
		// printf("ORIG: % 5E", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5E", 1234567.0).c_str());
		// printf("ORIG: %05E", 1234567.0);
		// printf("\nTEST: %s\n", format("%05E", 1234567.0).c_str());
		// printf("ORIG: %.5E", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5E", 1234567.0).c_str());
		// printf("ORIG: %7.5E", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5E", 1234567.0).c_str());
		// printf("ORIG: %g", 1234567.0);
		// printf("\nTEST: %s\n", format("%g", 1234567.0).c_str());
		// printf("ORIG: %+g", 1234567.0);
		// printf("\nTEST: %s\n", format("%+g", 1234567.0).c_str());
		// printf("ORIG: %-5g", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5g", 1234567.0).c_str());
		// printf("ORIG: % 5g", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5g", 1234567.0).c_str());
		// printf("ORIG: %05g", 1234567.0);
		// printf("\nTEST: %s\n", format("%05g", 1234567.0).c_str());
		// printf("ORIG: %.5g", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5g", 1234567.0).c_str());
		// printf("ORIG: %7.5g", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5g", 1234567.0).c_str());
		// printf("ORIG: %G", 1234567.0);
		// printf("\nTEST: %s\n", format("%G", 1234567.0).c_str());
		// printf("ORIG: %+G", 1234567.0);
		// printf("\nTEST: %s\n", format("%+G", 1234567.0).c_str());
		// printf("ORIG: %-5G", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5G", 1234567.0).c_str());
		// printf("ORIG: % 5G", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5G", 1234567.0).c_str());
		// printf("ORIG: %05G", 1234567.0);
		// printf("\nTEST: %s\n", format("%05G", 1234567.0).c_str());
		// printf("ORIG: %.5G", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5G", 1234567.0).c_str());
		// printf("ORIG: %7.5G", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5G", 1234567.0).c_str());
		// cout << "start of a" << endl;
		// printf("ORIG: %a", 1234567.0);
		// printf("\nTEST: %s\n", format("%a", 1234567.0).c_str());
		// printf("ORIG: %+a", 1234567.0);
		// printf("\nTEST: %s\n", format("%+a", 1234567.0).c_str());
		// printf("ORIG: %-5a", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5a", 1234567.0).c_str());
		// printf("ORIG: % 5a", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5a", 1234567.0).c_str());
		// printf("ORIG: %05a", 1234567.0);
		// printf("\nTEST: %s\n", format("%05a", 1234567.0).c_str());
		// printf("ORIG: %.5a", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5a", 1234567.0).c_str());
		// printf("ORIG: %7.5a", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5a", 1234567.0).c_str());
		// printf("ORIG: %A", 1234567.0);
		// printf("\nTEST: %s\n", format("%A", 1234567.0).c_str());
		// printf("ORIG: %+A", 1234567.0);
		// printf("\nTEST: %s\n", format("%+A", 1234567.0).c_str());
		// printf("ORIG: %-5A", 1234567.0);
		// printf("\nTEST: %s\n", format("%-5A", 1234567.0).c_str());
		// printf("ORIG: % 5A", 1234567.0);
		// printf("\nTEST: %s\n", format("% 5A", 1234567.0).c_str());
		// printf("ORIG: %05A", 1234567.0);
		// printf("\nTEST: %s\n", format("%05A", 1234567.0).c_str());
		// printf("ORIG: %.5A", 1234567.0);
		// printf("\nTEST: %s\n", format("%.5A", 1234567.0).c_str());
		// printf("ORIG: %7.5A", 1234567.0);
		// printf("\nTEST: %s\n", format("%7.5A", 1234567.0).c_str());
		// printf("ORIG: %c", 'a');
		// printf("\nTEST: %s\n", format("%c", 'a').c_str());
		// printf("ORIG: %4c", 'a');
		// printf("\nTEST: %s\n", format("%4c", 'a').c_str());
		// printf("ORIG: %.4c", 'a');
		// printf("\nTEST: %s\n", format("%.4c", 'a').c_str());
		// printf("ORIG: %s", "abcdefg");
		// printf("\nTEST: %s\n", format("%s", "abcdefg").c_str());
		// printf("ORIG: %10s", "abcdefg");
		// printf("\nTEST: %s\n", format("%10s", "abcdefg").c_str());
		// printf("ORIG: %010s", "abcdefg");
		// printf("\nTEST: %s\n", format("%010s", "abcdefg").c_str());
		// printf("ORIG: %p", nullptr);
		// printf("\nTEST: %s\n", format("%p", nullptr).c_str());
		// printf("ORIG: %10p", nullptr);
		// printf("\nTEST: %s\n", format("%10p", nullptr).c_str());
		// printf("ORIG: %*d", 5, 10);
		// printf("\nTEST: %s\n", format("%*d", 5, 10).c_str());
		// printf("ORIG: %.*d", 5, 10);
		// printf("\nTEST: %s\n", format("%.*d", 5, 10).c_str());
		// printf("ORIG: %*.*d", 5, 5, 10);
		// printf("\nTEST: %s\n", format("%*.*d", 5, 5, 10).c_str());
		// printf("ORIG: %*.*d", 5, 5, 1234567);
		// printf("\nTEST: %s\n", format("%*.*d", 5, 5, 1234567).c_str());
		// printf("ORIG: %d%s%a%c", 5, "hello", 16.0, 'c');
		// printf("\nTEST: %s\n", format("%d%s%a%c", 5, "hello", 12, 'c').c_str());
		// setlocale(LC_CTYPE, "rus"); 
	 //    wchar_t wc[] = L"тест";
	 //    printf("Wide characters:\t%lc %lc %%\n", wc[0], wc[1]);
	 //    printf("%s\n", format("Wide characters:\t%lc %lc %%\n", wc[0], wc[1]).c_str());
	}	
	catch (const exception& e) {
		cout << e.what() << std::endl;
	}
	catch (string s) {
		cout << s << endl;
	}
}
