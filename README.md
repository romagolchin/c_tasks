4\. Функция format, реализующая безопасный аналог sprintf

\#include\<string\>

\#include \<stdexcept\>

template\<typename... Args\>

std::string format(std::string const & fmt, Args… args);

Требования:

Заголовочный файл format.h 

Библиотека libformat.so либо libformat.a

Формат - как у sprintf

В случае отсутствия аргумента кидается исключение std::out_of_range

Если const char * == nullptr, вместо него выводится “\<null\>”

std::string обрабатывается так же, как const char *

Если литерал формата не соответсвует типу аргумента - кидается исключение std::invalid_argument

5\. Доработка format для поддержки автоопределения типа и указателей

Усовершенствовать format, добавив формат выводa %@, который: 

Если аргумент - nullptr_t – выводит nullptr

Если аргумент указатель, и его значение равно 0 – выводит nulltpr<имя\_типа>

Если аргумент указатель, и его значение не равно 0 - выводит ptr<имя\_типа>(вывод значения как для %@)

Если аргумент массив известной размерности – выводит элементы массива через запятую в [] 

Если аргумент может быть преобразован к std::string – выводит результат такого преобразования

Если ни одно преобразование невозможно – кидается исключение std::invalid_argument	

6\. Класс lazy_string для работы со строками реализующий copy-on-write

Класс lazy_string, реализующий copy-on-write 

Конструируется от std::string

Приводится к std::string 

Имеет size, length, at, operator[] аналогично std::string

Имеет операторы ввода и вывода в поток (<<, >>)

Имеет substr, причем при взятии подстроки копирования не происходит

7\. Доработка класса lazy_string для безопасной работы в многопоточном приложении

Доработать lazy_string для обеспечения безопасной работы из нескольких потоков

